<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>船橋今なにする？</title>
    <link rel="stylesheet" href="../CSS/style.css"> 
</head>
<body class="fin001">

    <header class="fin001-header" id="headerArea">
        </header>

    <main>
        <div class="container fin001-main-container">
            <h1>船橋今なにする？</h1>
            <button 
                class="btn btn-primary fin001-start-btn" 
                onclick="location.href='FIN006.html'">
                START
            </button>
        </div>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const isLoggedIn = localStorage.getItem('isLoggedIn');
            const savedImageUrl = localStorage.getItem('profileImage'); 
            const headerArea = document.getElementById('headerArea');

            if (!headerArea) return; // エラー防止

            if (isLoggedIn === 'true') {
                let imageUrlToShow = savedImageUrl ? savedImageUrl : '../images/icon_default.png';
                
                // ★ 変更点：クラス名を .header-profile-icon に統一
                headerArea.innerHTML = `
                    <a href="FIN008.html" class="header-profile-icon"> 
                        <img src="${imageUrlToShow}" alt="メニュー">
                    </a>`;
                
            } else {
                headerArea.innerHTML = `
                    <button 
                        class="btn btn-secondary fin001-login-btn" 
                        id="headerLoginButton"> 
                        ログイン
                    </button>
                `;
                
                const loginBtn = document.getElementById('headerLoginButton');
                if (loginBtn) {
                    loginBtn.addEventListener('click', function() {
                        localStorage.setItem('loginRedirect', 'FIN001.html');
                        localStorage.removeItem('redirectUrl'); 
                        location.href = 'FIN002.html';
                    });
                }
            }
        });
    </script>
</body>
</html>