<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>検索結果（FIN007）</title>
    <link rel="stylesheet" href="../CSS/style.css">
</head>
<body class="fin007">

    <div class="fin007-title-bar">
        <h2>検索結果</h2>
        
        <span class="header-icon-area" id="headerIconArea">
            </span>
    </div>

    <div class="fin007-results-container">
        <div class="fin007-result-item">
            <span class="fin007-result-info">店名 徒歩○分 1000円〜1400円</span>
            <span class="fin007-result-star">★</span>
        </div>
        <div class="fin007-result-item">
            <span class="fin007-result-info">店名 徒歩○分 1000円〜1400円</span>
            <span class="fin007-result-star">★</span>
        </div>
        <div class="fin007-pagination">
            <span class="fin007-page-item active">1</span>
            <a href="#" class="fin007-page-item">2</a>
        </div>
    </div>

    <a href="FIN006.html" class="fin007-change-criteria-btn">
        条件<br>を変える
    </a>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            
            // --- ログイン状態チェック処理 ---
            const isLoggedIn = localStorage.getItem('isLoggedIn');
            const savedImageUrl = localStorage.getItem('profileImage');
            const iconArea = document.getElementById('headerIconArea');

            if (!iconArea) return; // エラー防止

            if (isLoggedIn === 'true') {
                let imageUrlToShow = savedImageUrl ? savedImageUrl : '../images/icon_default.png';
                
                // ★ 変更点：クラス名を .header-profile-icon に統一
                iconArea.innerHTML = `
                    <a href="FIN008.html" class="header-profile-icon"> 
                        <img src="${imageUrlToShow}" alt="メニュー">
                    </a>`;
            } else {
                iconArea.innerHTML = '<a href="FIN002.html" class="btn btn-secondary header-login-btn">ログイン</a>';
                
                const loginBtn = iconArea.querySelector('.header-login-btn');
                if (loginBtn) {
                    loginBtn.addEventListener('click', function(e) {
                        e.preventDefault(); 
                        const currentUrl = window.location.href;
                        localStorage.setItem('redirectUrl', currentUrl); 
                        localStorage.setItem('loginRedirect', currentUrl); 
                        window.location.href = e.target.href; 
                    });
                }
            }
        });
    </script>

</body>
</html>